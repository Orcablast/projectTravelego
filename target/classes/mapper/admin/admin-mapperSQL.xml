<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="admin">
<!-- d여기다 쿼리문 작성 -->
	<!-- 일반회원만  잠ㅅ-->
	<select id="selectCustomerMember" parameterType="member" resultType="member">
		select
		member_id as memberId,
		member_pw as memberPw,
		member_nickname as memberNickname,
		member_name as memberName,
		age,
		gender,
		phone,
		email,
		member_level as memberLevel
		from member
	</select>
	<select id="selectCompanyMember" parameterType="company" resultType="company">
		select
		company_id as companyId,
		 license,
		 company_url as companyUrl,
		 join_confirm as joinConfirm
		from company
	</select>
	<update id="confirmUpdateMember" parameterType="company">
		update company set join_confirm =1 where  company_id=#{companyId}
			</update>
	<update id="modifyMemberLevel" parameterType="member">
			update member set member_level = -1 where member_id=#{memberId}
	</update>		
	<update id="memberRestore" parameterType="member">
		update member set member_level = 1 where member_id=#{memberId}
	</update>
	<delete id="memberDelete" parameterType="member">
	delete from member where member_id=#{memberId}
	</delete>
	<update id="companyStop" parameterType="member">
		update member set member_level = -1 where member_id=#{memberId}
	</update>
	<select id="regionList" resultType="region">
		select
		REGION_COUNTRY as regionCountry
		from region
		group by region_country
	</select>
	<select id="selectCity" parameterType="region" resultType="region">
	select 
		region_no as regionNo,
		region_country as regionCountry,
		region_city as regionCity,
		filename
		from region where region_country=#{regionCountry}
	</select>
	<select id ="middleList" parameterType="region" resultType="region">
	select 
		REGION_NO as regionNo,
		REGION_COUNTRY as regionCountry,
		REGION_CITY as regionCity,
		FILENAME from REGION
		where REGION_COUNTRY =#{regionCountry}
	</select> 
	
	<select id = "selectQnA" parameterType="qna" resultType="qna">
	select 
	qna_no as qnaNo,
	qna_writer as qnaWriter,
	qna_title as qnaTitle,
	qna_content as qnaContent,
	ask_date as askDate,
	qna_answer as qnaAnswer,
	answer_date as answerDate
	from qna 
	join member  on 
	member_id=qna_writer
	</select>
	
	<select id="qnaView" parameterType="qna" resultType="qna">
	select 
	qna_no as qnaNo,
	qna_writer as qnaWriter,
	qna_title as qnaTitle,
	qna_content as qnaContent,
	ask_date as askDate ,
	qna_answer as qnaAnswer,
	answer_date as answerDate
	from qna 
	where qna_no = #{qnaNo}
	</select>
	
	<update id="qnaAnswer" parameterType="qna" >
		update qna set
		qna_answer=#{qnaAnswer},
		answer_date=sysdate
		where qna_No=#{qnaNo}
	</update>
	
</mapper>
