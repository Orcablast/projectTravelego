<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="tour">
	<select id="selectTotalCount" parameterType="string" resultType="_int">
		select count(*) as cnt from tour where member_id = #{_parameter}
	</select>
	<select id="selectMoreItem" parameterType="mtv" resultType="tour">
		select * from(
		select ROWNUM as rnum, p.* from(
		select item_no as itemNo, member_name as memberName, item_title as itemTitle, region_no as regionNo, begin_date as beginDate, end_date as endDate, filepath, close_check as closeCheck
		from tour join member using(member_id) join photo on(board_no=item_no and board_class=4)
		where member_id=#{memberId} order by item_no desc)p)
		where rnum between #{start} and #{end}
	</select>
	<select id="selectReviewList" parameterType="_int" resultType="review">
		select review_no as reviewNo, item_no as itemNo, member_id as memberId, review_rate as reviewRate, review_content as reviewContent, review_date as reviewDate
		from tour_review where item_no=#{_parameter}
	</select>
</mapper>
