<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="mytrip">
	<insert id="insertTrip" parameterType="mytrip">
		insert into my_trip values(
			my_trip_seq.nextval,#{regionNo},sysdate,sysdate
		)
	</insert>
	<select id="searchRegion" parameterType="String" resultType="region">
		select
			region_no as regionNo,
			region_country as regionCountry,
			region_city as regionCity,
			filename
		from region
		where region_city like '%'||#{_parameter}||'%' or region_country like '%'||#{_parameter}||'%'
		order by regionCountry,regionCity
	</select>
	<insert id="setMytrip" parameterType="mytrip">
		insert into my_trip values(
			my_trip_seq.nextval,#{regionNo},#{beginDate},#{endDate}
		)
	</insert>
	<insert id="insertTripMember" parameterType="tripMember">
		insert into trip_member values(
			my_trip_seq.currval,#{memberId}
		)
	</insert>
	<select id="selectTripList" parameterType="tripMember" resultType="tripMember">
		select
			trip_no as tripNo,
			member_id as memberId
		from trip_member 
		where member_id=#{memberId}
	</select>
</mapper>
