<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="myPage">
  <select id="selectAllBoardList" parameterType="member" resultType="boardList">
  	select
  		rownum,
  		b.* from (
			select 
			    trip_board_title as boardTitle, 
			    trip_board_date as boardDate,
			    read_count as readCount
			    from trip_board where trip_board_writer = 'user'
			    union all
			select
			    rec_title as boardTitle, 
			    rec_date as boardDate,
			    read_count as readCount
			    from RECOMMEND_BOARD where rec_writer = 'user'
			    union all
			select
			    together_title as boardTitle,
			    together_date as boardDate,
			    read_count as readCount
			    from TOGETHER_BOARD where together_writer = 'user'
			    order by boardDate desc) b
  </select>
  
  <select id="selectBookmarkList" parameterType="member" resultType="bookmark">
  	select
  		rownum,
  		m.* from (
			select 
				trip_board_title as boardTitle,
				trip_board_writer as boardWriter 
				from trip_board
				join bookmark on (trip_board_no = board_no)
				where board_class=1
			union all
			select
				rec_title as boardTitle,
				rec_writer as boardWriter
				from recommend_board
				join bookmark on (rec_no = board_no)
				where board_class=2
			union all
			select
				together_title as boardTitle,
				together_writer as boardWriter
				from together_board
				join bookmark on (together_no = board_no)
				where board_class=3) m
				order by rownum desc
  </select>
  
  <insert id="insertQuestion" parameterType="member">
  	insert into qna values(
  		qna_seq.nextval, 
  		#{qnaWriter},
  		#{qnaTitle},
  		#{qnaContent},
  		sysdate,
  		null, null
  	)
  </insert>
</mapper>
